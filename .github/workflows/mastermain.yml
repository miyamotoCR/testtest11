name: masnoti

on:
  # プッシュもしくはプルリクエストでワークフローを起動する
  # ただしmasterブランチに対してのみ
  pull_request:
    branches:
      - master
  push:
     branches:
      - master

env:
  SLACK_BOT_TOKEN: ${{ secrets.SLACK_BOT_TOKEN }}

jobs:
  masnoti:
    runs-on: ubuntu-latest
    steps:
    - name: Send notification to Slack 
      uses: GoldenspearLLC/slack-chat-postmessage@v3
      with:
        channel: '#memo'
        payload: |
        {
          "text": "Custom Field Check",
          "attachments": [{
            "author_name": "slack-actions",
            "fallback": "fallback",
            "color": "good",
            "title": "CI Result",
            "text": "Succeeded",
            "fields": [{
              "title": "short title1",
              "value": "short value1",
              "short": true
            },
            {
              "title": "short title2",
              "value": "short value2",
              "short": true
            },
            {
              "title": "long title1",
              "value": "long value1",
              "short": false
            }]
          }]
        }
